var DepthKit=DepthKit||{rad:Math.PI/180,deg:180/Math.PI},DK=DepthKit;DepthKit.Vertex=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0;this.d=this.pz=this.py=this.px=0;this.mx=a;this.my=b;this.mz=c};DepthKit.Edge=function(a,b){this.u=a||new DepthKit.Vertex;this.v=b||new DepthKit.Vertex};DepthKit.Edge.prototype.isBehindCamera=function(){return 0>this.u.pz||0>this.v.pz};
DepthKit.Face=function(a,b,c,d){this.a=a||new DepthKit.Vertex;this.b=b||new DepthKit.Vertex;this.c=c||new DepthKit.Vertex;this.color=d||"#cccccc";this.light=void 0};DepthKit.Face.prototype.isBackface=function(){return(this.c.px-this.a.px)*(this.b.py-this.c.py)>(this.c.py-this.a.py)*(this.b.px-this.c.px)};DepthKit.Face.prototype.isBehindCamera=function(){return 0>this.a.pz||0>this.b.pz||0>this.c.pz};DepthKit.Face.prototype.getDepth=function(){return Math.min(this.a.d,this.b.d,this.c.d)};
DepthKit.faceSort=function(a,b){return b.getDepth()-a.getDepth()};DepthKit.Face.prototype.getAdjustedColor=function(){if(void 0===this.light)return this.color;var a=window.parseInt(this.color.slice(1),16),b=a>>16,c=a>>8&255,a=a&255,d=this.getLightFactor();return"#"+("00000"+(b*d<<16|c*d<<8|a*d|0).toString(16)).substr(-6)};
DepthKit.Face.prototype.getLightFactor=function(){var a=this.a.mx-this.b.mx,b=this.a.my-this.b.my,c=this.a.mz-this.b.mz,d=this.b.mx-this.c.mx,f=this.b.my-this.c.my,g=this.b.mz-this.c.mz,e=b*g-c*f,c=-(a*g-c*d),b=a*f-b*d,a=e*this.light.x+c*this.light.y+b*this.light.z,e=Math.sqrt(e*e+c*c+b*b),b=Math.sqrt(this.light.x*this.light.x+this.light.y*this.light.y+this.light.z*this.light.z);return Math.acos(a/(e*b))/Math.PI*this.light.brightness};
DepthKit.SceneObject=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0;this.rotationZ=this.rotationY=this.rotationX=0;this.scaleZ=this.scaleY=this.scaleX=1;this.step=this.scene=this.parent=void 0;this.mx=a;this.my=b;this.mz=c;this.rotationMZ=this.rotationMY=this.rotationMX=0;this.scaleMZ=this.scaleMY=this.scaleMX=1};DepthKit.SceneObject.prototype.setScene=function(a){this.scene=a};DepthKit.SceneObject.prototype.getGlobalX=function(){return this.parent?this.parent.getGlobalX()+this.x:this.x};
DepthKit.SceneObject.prototype.getGlobalY=function(){return this.parent?this.parent.getGlobalY()+this.y:this.y};DepthKit.SceneObject.prototype.getGlobalZ=function(){return this.parent?this.parent.getGlobalZ()+this.z:this.z};DepthKit.SceneObject.prototype.initM=function(){};DepthKit.SceneObject.prototype.rotateM=function(){};DepthKit.SceneObject.prototype.scaleM=function(){};DepthKit.SceneObject.prototype.translateM=function(){};
DepthKit.Mesh=function(a,b,c){DepthKit.SceneObject.call(this,a,b,c);this.d=0;this.vertices=[];this.edges=[];this.faces=[];this.strokeColor="#000000";this.strokeWidth=1};DepthKit.Mesh.prototype=new DepthKit.SceneObject;DepthKit.Mesh.prototype.constructor=DepthKit.Mesh;DepthKit.Mesh.prototype.addVertex=function(a,b,c){this.vertices.push(new DepthKit.Vertex(a,b,c));return this};
DepthKit.Mesh.prototype.addEdge=function(a,b){this.edges.push(new DepthKit.Edge(a||this.vertices[this.vertices.length-2]||new DepthKit.Vertex,b||this.vertices[this.vertices.length-1]||new DepthKit.Vertex));return this};DepthKit.Mesh.prototype.addFace=function(a,b,c,d){this.faces.push(new DepthKit.Face(a||this.vertices[this.vertices.length-3]||new DepthKit.Vertex,b||this.vertices[this.vertices.length-2]||new DepthKit.Vertex,c||this.vertices[this.vertices.length-1]||new DepthKit.Vertex,d));return this};
DepthKit.Mesh.prototype.applyFillcolor=function(a){for(var b=0;b<this.faces.length;b++)this.faces[b].color=a;return this};DepthKit.Mesh.prototype.applyLight=function(a){for(var b=0;b<this.faces.length;b++)this.faces[b].light=a;return this};DepthKit.Mesh.prototype.rotateX=function(a){for(var b=Math.cos(a*DK.rad),a=Math.sin(a*DK.rad),c=0;c<this.vertices.length;c++){var d=this.vertices[c].z*b+this.vertices[c].y*a;this.vertices[c].y=this.vertices[c].y*b-this.vertices[c].z*a;this.vertices[c].z=d}return this};
DepthKit.Mesh.prototype.rotateY=function(a){for(var b=Math.cos(a*DK.rad),a=Math.sin(a*DK.rad),c=0;c<this.vertices.length;c++){var d=this.vertices[c].z*b+this.vertices[c].x*a;this.vertices[c].x=this.vertices[c].x*b-this.vertices[c].z*a;this.vertices[c].z=d}return this};
DepthKit.Mesh.prototype.rotateZ=function(a){for(var b=Math.cos(a*DK.rad),a=Math.sin(a*DK.rad),c=0;c<this.vertices.length;c++){var d=this.vertices[c].y*b+this.vertices[c].x*a;this.vertices[c].x=this.vertices[c].x*b-this.vertices[c].y*a;this.vertices[c].y=d}return this};
DepthKit.Mesh.prototype.setScene=function(a){if(this.scene!==a){if(void 0!==this.scene)for(var b=0;b<this.scene.meshes.length;b++)if(this.scene.meshes[b]===this){this.scene.meshes.splice(b,1);break}void 0!==a&&a.meshes.push(this);this.scene=a}};DepthKit.meshSort=function(a,b){return b.d-a.d};
DepthKit.Mesh.prototype.draw=function(a){a.save();a.lineWidth=1;this.faces.sort(DK.faceSort);for(var b=0;b<this.faces.length;b++)if(!this.faces[b].isBackface()&&!this.faces[b].isBehindCamera())a.beginPath(),a.moveTo(this.faces[b].a.px,this.faces[b].a.py),a.lineTo(this.faces[b].b.px,this.faces[b].b.py),a.lineTo(this.faces[b].c.px,this.faces[b].c.py),a.lineTo(this.faces[b].a.px,this.faces[b].a.py),a.closePath(),a.fillStyle=a.strokeStyle=this.faces[b].getAdjustedColor(),a.fill(),a.stroke();a.strokeStyle=
this.strokeColor;a.lineWidth=this.strokeWidth;a.beginPath();for(b=0;b<this.edges.length;b++)this.edges[b].isBehindCamera()||(a.moveTo(this.edges[b].u.px,this.edges[b].u.py),a.lineTo(this.edges[b].v.px,this.edges[b].v.py));a.closePath();a.stroke();a.restore()};DepthKit.Mesh.prototype.initM=function(){this.mx=this.x;this.my=this.y;this.mz=this.z;for(var a=0;a<this.vertices.length;a++)this.vertices[a].mx=this.vertices[a].x,this.vertices[a].my=this.vertices[a].y,this.vertices[a].mz=this.vertices[a].z};
DepthKit.Mesh.prototype.rotateM=function(){this.rotationMX=this.rotationX*DK.rad+this.parent.rotationMX;this.rotationMY=this.rotationY*DK.rad+this.parent.rotationMY;this.rotationMZ=this.rotationZ*DK.rad+this.parent.rotationMZ;var a,b,c,d,f,g;if(this.rotationMX){a=Math.cos(this.rotationMX);b=Math.sin(this.rotationMX);for(c=0;c<this.vertices.length;c++)f=this.vertices[c].my*a-this.vertices[c].mz*b,g=this.vertices[c].mz*a+this.vertices[c].my*b,this.vertices[c].my=f,this.vertices[c].mz=g}if(this.rotationMY){a=
Math.cos(this.rotationMY);b=Math.sin(this.rotationMY);for(c=0;c<this.vertices.length;c++)d=this.vertices[c].mx*a-this.vertices[c].mz*b,g=this.vertices[c].mz*a+this.vertices[c].mx*b,this.vertices[c].mx=d,this.vertices[c].mz=g}if(this.rotationMZ){a=Math.cos(this.rotationMZ);b=Math.sin(this.rotationMZ);for(c=0;c<this.vertices.length;c++)d=this.vertices[c].mx*a-this.vertices[c].my*b,f=this.vertices[c].my*a+this.vertices[c].mx*b,this.vertices[c].mx=d,this.vertices[c].my=f}};
DepthKit.Mesh.prototype.translateM=function(){this.mx+=this.parent.mx;this.my+=this.parent.my;this.mz+=this.parent.mz;for(var a=0;a<this.vertices.length;a++)this.vertices[a].mx+=this.mx,this.vertices[a].my+=this.my,this.vertices[a].mz+=this.mz};DepthKit.Container=function(a,b,c){DepthKit.SceneObject.call(this,a,b,c);this.children=[]};DepthKit.Container.prototype=new DepthKit.SceneObject;DepthKit.Container.prototype.constructor=DepthKit.Container;
DepthKit.Container.prototype.rotateX=function(a){for(var b=Math.cos(a*DK.rad),c=Math.sin(a*DK.rad),d=0;d<this.children.length;d++){var f=this.children[d].z*b+this.children[d].y*c;this.children[d].y=this.children[d].y*b-this.children[d].z*c;this.children[d].z=f;this.children[d].rotateX(a)}return this};
DepthKit.Container.prototype.rotateY=function(a){for(var b=Math.cos(a*DK.rad),c=Math.sin(a*DK.rad),d=0;d<this.children.length;d++){var f=this.children[d].z*b+this.children[d].x*c;this.children[d].x=this.children[d].x*b-this.children[d].z*c;this.children[d].z=f;this.children[d].rotateY(a)}return this};
DepthKit.Container.prototype.rotateZ=function(a){for(var b=Math.cos(a*DK.rad),c=Math.sin(a*DK.rad),d=0;d<this.children.length;d++){var f=this.children[d].y*b+this.children[d].x*c;this.children[d].x=this.children[d].x*b-this.children[d].y*c;this.children[d].y=f;this.children[d].rotateZ(a)}return this};
DepthKit.Container.prototype.spinX=function(a){for(var b=Math.cos(a*DK.rad),a=Math.sin(a*DK.rad),c=0;c<this.children.length;c++){var d=this.children[c].z*b+this.children[c].y*a;this.children[c].y=this.children[c].y*b-this.children[c].z*a;this.children[c].z=d}return this};
DepthKit.Container.prototype.spinY=function(a){for(var b=Math.cos(a*DK.rad),a=Math.sin(a*DK.rad),c=0;c<this.children.length;c++){var d=this.children[c].z*b+this.children[c].x*a;this.children[c].x=this.children[c].x*b-this.children[c].z*a;this.children[c].z=d}return this};
DepthKit.Container.prototype.spinZ=function(a){for(var b=Math.cos(a*DK.rad),a=Math.sin(a*DK.rad),c=0;c<this.children.length;c++){var d=this.children[c].y*b+this.children[c].x*a;this.children[c].x=this.children[c].x*b-this.children[c].y*a;this.children[c].y=d}return this};DepthKit.Container.prototype.addChild=function(a){if(a.parent===this)return a;void 0!==a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this;a.setScene(this.scene);return a};
DepthKit.Container.prototype.removeChildAt=function(a){if(!(a>=this.children.length)){for(var b=this.children[a];a<this.children.length-1;)this.children[a]=this.children[++a];this.children.pop();b.parent=void 0;b.setScene(void 0);return b}};DepthKit.Container.prototype.removeChild=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b]===a)return this.removeChildAt(b)};DepthKit.Container.prototype.setScene=function(a){this.scene=a;for(var b=0;b<this.children.length;b++)this.children[b].setScene(a)};
DepthKit.Container.prototype.initM=function(){this.mx=this.x;this.my=this.y;this.mz=this.z;for(var a=0;a<this.children.length;a++)this.children[a].initM()};
DepthKit.Container.prototype.rotateM=function(){this.rotationMX=this.rotationX*DK.rad+this.parent.rotationMX;this.rotationMY=this.rotationY*DK.rad+this.parent.rotationMY;this.rotationMZ=this.rotationZ*DK.rad+this.parent.rotationMZ;var a,b,c,d,f,g;if(this.rotationMX){a=Math.cos(this.rotationMX);b=Math.sin(this.rotationMX);for(c=0;c<this.children.length;c++)f=this.children[c].my*a-this.children[c].mz*b,g=this.children[c].mz*a+this.children[c].my*b,this.children[c].my=f,this.children[c].mz=g}if(this.rotationMY){a=
Math.cos(this.rotationMY);b=Math.sin(this.rotationMY);for(c=0;c<this.children.length;c++)d=this.children[c].mx*a-this.children[c].mz*b,g=this.children[c].mz*a+this.children[c].mx*b,this.children[c].mx=d,this.children[c].mz=g}if(this.rotationMZ){a=Math.cos(this.rotationMZ);b=Math.sin(this.rotationMZ);for(c=0;c<this.children.length;c++)d=this.children[c].mx*a-this.children[c].my*b,f=this.children[c].my*a+this.children[c].mx*b,this.children[c].mx=d,this.children[c].my=f}for(c=0;c<this.children.length;c++)this.children[c].rotateM()};
DepthKit.Container.prototype.scaleM=function(){};DepthKit.Container.prototype.translateM=function(){this.mx+=this.parent.mx;this.my+=this.parent.my;this.mz+=this.parent.mz;for(var a=0;a<this.children.length;a++)this.children[a].translateM()};DepthKit.Scene=function(){DepthKit.Container.call(this,0,0,0);this.meshes=[];this.scene=this};DepthKit.Scene.prototype=new DepthKit.Container;DepthKit.Scene.prototype.constructor=DepthKit.Scene;DepthKit.Scene.prototype.setScene=function(){};
DepthKit.Scene.prototype.initM=function(){for(var a=this.mz=this.my=this.mx=0;a<this.children.length;a++)this.children[a].initM()};DepthKit.Scene.prototype.rotateM=function(){for(var a=this.rotationMZ=this.rotationMY=this.rotationMX=0;a<this.children.length;a++)this.children[a].rotateM()};DepthKit.Scene.prototype.scaleM=function(){};DepthKit.Scene.prototype.translateM=function(){for(var a=0;a<this.children.length;a++)this.children[a].translateM()};
DepthKit.Camera=function(){this.y=this.x=0;this.z=-650;this.ey=this.ex=this.rotationZ=this.rotationY=this.rotationX=0;this.ez=650;this.step=void 0};DepthKit.Light=function(a,b,c,d){this.x=void 0===a?-100:a;this.y=void 0===b?-100:b;this.z=void 0===c?-100:c;this.brightness=void 0===d?1:Math.min(Math.max(d,0),1);this.step=void 0};DepthKit.Light.prototype.setBrightness=function(a){this.brightness=Math.min(Math.max(a,0),1)};
DepthKit.Viewport=function(){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=480;this.canvas.height=320;this.vpX=240;this.vpY=160};DepthKit.Viewport.prototype.fillPage=function(a){this.canvas.width=window.innerWidth;this.canvas.height=window.innerHeight;this.vpX=this.canvas.width/2;this.vpY=this.canvas.height/2;this.canvas.style.position="absolute";this.canvas.style.zIndex=a||"auto";document.body.appendChild(this.canvas)};
DepthKit.Viewport.prototype.fillElement=function(a,b){var c=document.getElementById(a);this.canvas.width=Number((""+c.style.width).replace("px",""));this.canvas.height=Number((""+c.style.height).replace("px",""));this.vpX=this.canvas.width/2;this.vpY=this.canvas.height/2;this.canvas.style.position="relative";this.canvas.style.zIndex=b||"auto";c.appendChild(this.canvas)};DepthKit.Viewport.prototype.setBackgroundcolor=function(a){this.canvas.style.background=a};
DepthKit.Fog=function(a,b){this.depth=b||3E3;this.color=a||"#ffffff";var c=window.parseInt(this.color.slice(1),16);this.aColor="rgba("+(c>>16)+", "+(c>>8&255)+", "+(c&255)+", 0.15)";this.lastZ=this.depth};DepthKit.Fog.prototype.update=function(a,b){b.context.save();b.context.fillStyle=this.aColor;for(this.lastZ=this.lastZ;this.lastZ>a&&0<this.lastZ;this.lastZ-=this.depth/20)b.context.fillRect(0,0,b.canvas.width,b.canvas.height);b.context.restore()};
DepthKit.Fog.prototype.finish=function(a){this.update(0,a);this.lastZ=this.depth};DepthKit.Renderer=function(a,b,c){this.scene=b||new DeptKit.Scene;this.camera=c||new DepthKit.Camera;this.viewport=a||new DepthKit.Viewport;this.fog=void 0};
DepthKit.Renderer.prototype.render=function(){this.scene.initM();this.scene.rotateM();this.scene.translateM();for(var a=Math.cos(this.camera.rotationX*DK.rad),b=Math.sin(this.camera.rotationX*DK.rad),c=Math.cos(this.camera.rotationY*DK.rad),d=Math.sin(this.camera.rotationY*DK.rad),f=Math.cos(this.camera.rotationZ*DK.rad),g=Math.sin(this.camera.rotationZ*DK.rad),e=0;e<this.scene.meshes.length;e++){this.scene.meshes[e].d=16777215;for(var h=0;h<this.scene.meshes[e].vertices.length;h++){var l=this.scene.meshes[e].vertices[h].mx-
this.camera.x,i=this.scene.meshes[e].vertices[h].my-this.camera.y,j=this.scene.meshes[e].vertices[h].mz-this.camera.z,m=g*i+f*l,k=c*j+d*m,n=f*i-g*l,o=b*k+a*n,k=a*k-b*n;this.scene.meshes[e].vertices[h].px=this.viewport.vpX+(c*m-d*j-this.camera.ex)*(this.camera.ez/k);this.scene.meshes[e].vertices[h].py=this.viewport.vpY+(o-this.camera.ey)*(this.camera.ez/k);this.scene.meshes[e].vertices[h].pz=k;this.scene.meshes[e].vertices[h].d=Math.sqrt(l*l+i*i+j*j);this.scene.meshes[e].d=Math.min(this.scene.meshes[e].d,
this.scene.meshes[e].vertices[h].d)}}this.scene.meshes.sort(DK.meshSort);for(e=0;e<this.scene.meshes.length;e++)this.scene.meshes[e].draw(this.viewport.context),void 0!==this.fog&&this.fog.update(this.scene.meshes[e].d,this.viewport);void 0!==this.fog&&this.fog.finish(this.viewport)};
if(!window.requestAnimationFrame)window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){return window.setTimeout(a,17)};if(!window.cancelRequestAnimationFrame)window.cancelRequestAnimationFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout;
DepthKit.startTime=(new Date).getTime();DepthKit.getTimer=function(){return(new Date).getTime()-DepthKit.startTime};DepthKit.key={};DepthKit.key.startCapturing=function(){DepthKit.key.down={UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1,X:!1,C:!1,SPACE:!1};DepthKit.key.pressed={UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1,X:!1,C:!1,SPACE:!1};window.addEventListener("keydown",DepthKit.key.onKD,!1);window.addEventListener("keyup",DepthKit.key.onKU,!1)};
DepthKit.key.stopCapturing=function(){window.removeEventListener("keydown",DepthKit.key.onKD,!1);window.removeEventListener("keyup",DepthKit.key.onKU,!1);delete DepthKit.key.down;delete DepthKit.key.pressed};DepthKit.key.unsetPressed=function(){DepthKit.key.pressed.UP=!1;DepthKit.key.pressed.DOWN=!1;DepthKit.key.pressed.LEFT=!1;DepthKit.key.pressed.RIGHT=!1;DepthKit.key.pressed.X=!1;DepthKit.key.pressed.C=!1;DepthKit.key.pressed.SPACE=!1};
DepthKit.key.onKD=function(a){switch(a.keyCode){case 38:if(!DepthKit.key.down.UP)DepthKit.key.pressed.UP=!0,DepthKit.key.down.UP=!0;break;case 40:if(!DepthKit.key.down.DOWN)DepthKit.key.pressed.DOWN=!0,DepthKit.key.down.DOWN=!0;break;case 37:if(!DepthKit.key.down.LEFT)DepthKit.key.pressed.LEFT=!0,DepthKit.key.down.LEFT=!0;break;case 39:if(!DepthKit.key.down.RIGHT)DepthKit.key.pressed.RIGHT=!0,DepthKit.key.down.RIGHT=!0;break;case 88:DepthKit.key.down.X=!0;if(!DepthKit.key.down.X)DepthKit.key.pressed.X=
!0,DepthKit.key.down.X=!0;break;case 67:if(!DepthKit.key.down.C)DepthKit.key.pressed.C=!0,DepthKit.key.down.C=!0;break;case 32:if(!DepthKit.key.down.SPACE)DepthKit.key.pressed.SPACE=!0,DepthKit.key.down.SPACE=!0}};
DepthKit.key.onKU=function(a){switch(a.keyCode){case 38:DepthKit.key.down.UP=!1;break;case 40:DepthKit.key.down.DOWN=!1;break;case 37:DepthKit.key.down.LEFT=!1;break;case 39:DepthKit.key.down.RIGHT=!1;break;case 88:DepthKit.key.down.X=!1;break;case 67:DepthKit.key.down.C=!1;break;case 32:DepthKit.key.down.SPACE=!1}};DepthKit.mouse={};
DepthKit.mouse.attachTo=function(a){var b={x:0,y:0,event:null},c=document.body.scrollLeft,d=document.documentElement.scrollLeft,f=document.body.scrollTop,g=document.documentElement.scrollTop,e=a.canvas.offsetLeft,h=a.canvas.offsetTop;a.canvas.addEventListener("mousemove",function(a){var i,j;a.pageX||a.pageY?(i=a.pageX,j=a.pageY):(i=a.clientX+c+d,j=a.clientY+f+g);i-=e;j-=h;b.x=i;b.y=j;b.event=a},!1);a.mouse=b};
DepthKit.Engine=function(){this.scene=new DepthKit.Scene;this.camera=new DepthKit.Camera;this.light=new DepthKit.Light;this.viewport=new DepthKit.Viewport;this.renderer=new DepthKit.Renderer(this.viewport,this.scene,this.camera);this.time=DepthKit.getTimer();this.elapsed=DepthKit.getTimer()-this.time;this.paintMode=!1};DepthKit.Engine.prototype.step=function(a){if(void 0!==a.children)for(var b=0;b<a.children.length;b++)this.step(a.children[b]);void 0!==a.step&&"function"===typeof a.step&&a.step()};
DepthKit.Engine.prototype.start=function(){this.time=DepthKit.getTimer();this.elapsed=DepthKit.getTimer()-this.time;var a=this;(function c(){frameID=window.requestAnimationFrame(c,a.viewport.canvas);a.elapsed=DepthKit.getTimer()-a.time;a.time=DepthKit.getTimer();a.paintMode||a.viewport.context.clearRect(0,0,a.viewport.canvas.width,a.viewport.canvas.height);a.step(a.scene);a.step(a.light);a.step(a.camera);a.renderer.render();void 0!==DepthKit.key.pressed&&DepthKit.key.unsetPressed()})()};
DepthKit.Engine.prototype.stop=function(){window.cancelRequestAnimationFrame(frameID)};
DepthKit.Cube=function(a){DepthKit.Mesh.call(this,0,0,0);this.size=a||100;this.halfSize=this.size/2;this.addVertex(-this.halfSize,this.halfSize,-this.halfSize);this.addVertex(this.halfSize,this.halfSize,-this.halfSize);this.addVertex(this.halfSize,-this.halfSize,-this.halfSize);this.addVertex(-this.halfSize,-this.halfSize,-this.halfSize);this.addVertex(-this.halfSize,this.halfSize,this.halfSize);this.addVertex(this.halfSize,this.halfSize,this.halfSize);this.addVertex(this.halfSize,-this.halfSize,
this.halfSize);this.addVertex(-this.halfSize,-this.halfSize,this.halfSize);this.addFace(this.vertices[1],this.vertices[5],this.vertices[4],"#ff0000");this.addFace(this.vertices[0],this.vertices[1],this.vertices[4],"#ff0000");this.addFace(this.vertices[6],this.vertices[2],this.vertices[3],"#00ff00");this.addFace(this.vertices[7],this.vertices[6],this.vertices[3],"#00ff00");this.addFace(this.vertices[3],this.vertices[0],this.vertices[4],"#0000ff");this.addFace(this.vertices[7],this.vertices[3],this.vertices[4],
"#0000ff");this.addFace(this.vertices[2],this.vertices[5],this.vertices[1],"#ffff00");this.addFace(this.vertices[6],this.vertices[5],this.vertices[2],"#ffff00");this.addFace(this.vertices[6],this.vertices[4],this.vertices[5],"#00ffff");this.addFace(this.vertices[6],this.vertices[7],this.vertices[4],"#00ffff");this.addFace(this.vertices[2],this.vertices[1],this.vertices[0],"#ff00ff");this.addFace(this.vertices[3],this.vertices[2],this.vertices[0],"#ff00ff")};DepthKit.Cube.prototype=new DepthKit.Mesh;
DepthKit.Cube.prototype.constructor=DepthKit.Cube;
DepthKit.Cube.prototype.draw=function(a){this.faces.sort(DK.faceSort);a.save();for(var b=0;b<this.faces.length;b++)if(!this.faces[b].isBackface()&&!this.faces[b].isBehindCamera())a.beginPath(),a.moveTo(this.faces[b].a.px,this.faces[b].a.py),a.lineTo(this.faces[b].b.px,this.faces[b].b.py),a.lineTo(this.faces[b].c.px,this.faces[b].c.py),a.lineTo(this.faces[b].a.px,this.faces[b].a.py),a.closePath(),a.fillStyle=a.strokeStyle=this.faces[b].getAdjustedColor(),a.fill(),a.stroke();a.restore()};
DepthKit.ObjModel=function(){DepthKit.Mesh.call(this,0,0,0);this.scale=1};DepthKit.ObjModel.prototype=new DepthKit.Mesh;DepthKit.ObjModel.prototype.constructor=DepthKit.ObjModel;
DepthKit.ObjModel.prototype.parseFile=function(a,b){if(void 0!==a){this.scale=b||100;var c=this,d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){for(var a=d.responseText.split("\n"),b=0;b<a.length;b++){var e=a[b].split(" ");"v"===e[0]?c.addVertex(e[1]*c.scale,e[2]*c.scale,e[3]*c.scale):"f"===e[0]&&c.addFace(c.vertices[e[3].split("/")[0]-1],c.vertices[e[2].split("/")[0]-1],c.vertices[e[1].split("/")[0]-1])}c.onParsed()}};d.send(null)}};
DepthKit.ObjModel.prototype.onParsed=function(){};
