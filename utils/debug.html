<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>debug</title>
    <style>
      body { margin: 0; }
    </style>
  </head>
  <body>
    <!-- moppie en keppelie -->
    <script src="../src/DepthKit.js"></script>
    <script src="../src/core/Vertex.js"></script>
    <script src="../src/core/Edge.js"></script>
    <script src="../src/core/Face.js"></script>
    <script src="../src/core/SceneObject.js"></script>
    <script src="../src/core/Mesh.js"></script>
    <script src="../src/core/Container.js"></script>
    <script src="../src/core/Scene.js"></script>
    <script src="../src/core/Camera.js"></script>
    <script src="../src/core/Light.js"></script>
    <script src="../src/core/Viewport.js"></script>
    <script src="../src/core/Fog.js"></script>
    <script src="../src/core/Renderer.js"></script>
    <script src="../src/core/Timers.js"></script>
    <script src="../src/ui/Key.js"></script>
    <script src="../src/ui/Mouse.js"></script>
    <script src="../src/core/Engine.js"></script>
    <script src="../src/objects/Cube.js"></script>
    <script src="../src/objects/LetterA.js"></script>
    <script src="../src/objects/ObjModel.js"></script>
    <script>
      var engine = new DK.Engine();
      engine.viewport.fillPage();
      
      DK.key.startCapturing();
      DK.mouse.attachTo(engine.viewport);
      
      var mesh = engine.scene.addChild(new DK.ObjModel());
      mesh.onParsed = function () { this.applyLight(engine.light); };
      mesh.parseFile("../demos/models/spaceship.obj", 50);
      mesh.step = function () {
        if ( DK.key.down ) {
          if ( DK.key.down.UP ) {
            this.y -= 2;
          }else if ( DK.key.down.DOWN) {
            this.y += 2;
          }
          if ( DK.key.down.RIGHT ) {
            this.x += 2;
          }else if ( DK.key.down.LEFT) {
            this.x -= 2;
          }
          if ( DK.key.down.X ) {
            this.z += 2;
          }else if ( DK.key.down.C) {
            this.z -= 2;
          }
          if ( DK.key.pressed.SPACE ) {
            //console.log('space');
            DK.mouse.detachFrom(engine.viewport);
          }
        }
        if ( engine.viewport.mouse ) {
          this.rotateY((engine.viewport.mouse.x - engine.viewport.vpX) * .01 );
          this.rotateX((engine.viewport.mouse.y - engine.viewport.vpY) * .01 );
        }
      };

      engine.start();
    </script>
  </body>
</html>
